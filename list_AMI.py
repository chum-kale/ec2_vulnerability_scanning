import boto3

session = boto3.Session(profile_name = 'chum')

ec2 = session.client('ec2', region_name = 'us-east-1')

filters = [
    {
        'Name': 'state',
        'Values': ['available']
    },
    {
        'Name': 'description',
        'Values': ['*Amazon Linux*', '*Ubuntu*', '*Red Hat*']
    }
]

response = ec2.describe_images(Filters=filters)
image_ids = [image['ImageId'] for image in response['Images']]

output = '/home/chinmay/work/ec2_vulnerability_scanning/ami_list.txt'

with open(output, 'w') as file:
    for image_id in image_ids:
        file.write(image_id + '\n')

